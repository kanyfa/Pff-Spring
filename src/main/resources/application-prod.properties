# Configuration pour l'environnement de production
spring.profiles.active=prod

# Configuration de la base de données de production
spring.datasource.url=${DATABASE_URL:jdbc:mysql://localhost:3306/lost_documents_db?useSSL=true&serverTimezone=UTC}
spring.datasource.username=${DATABASE_USERNAME:root}
spring.datasource.password=${DATABASE_PASSWORD:nani}

# Configuration JPA pour la production
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=false

# Configuration JWT pour la production
app.jwt.secret=${JWT_SECRET:productionSecretKey12345678901234567890123456789012345678901234567890}
app.jwt.expiration=${JWT_EXPIRATION:86400000}

# Configuration Email pour la production
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:your-email@gmail.com}
spring.mail.password=${MAIL_PASSWORD:your-app-password}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Configuration OAuth2 pour la production
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID:your-google-client-id}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET:your-google-client-secret}
spring.security.oauth2.client.registration.google.scope=email,profile

spring.security.oauth2.client.registration.facebook.client-id=${FACEBOOK_CLIENT_ID:your-facebook-client-id}
spring.security.oauth2.client.registration.facebook.client-secret=${FACEBOOK_CLIENT_SECRET:your-facebook-client-secret}
spring.security.oauth2.client.registration.facebook.scope=email,public_profile

# Configuration CORS pour la production
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://yourdomain.com,https://www.yourdomain.com}
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true

# Configuration des fichiers uploadés
app.upload.dir=${UPLOAD_DIR:uploads/}
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Logging pour la production
logging.level.com.documents.lostdocumentsapp=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.file.name=${LOG_FILE:logs/lost-documents-app.log}
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Configuration Actuator pour la production
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.endpoint.health.show-components=always

# Configuration du serveur pour la production
server.port=${PORT:8080}
# Laisser la valeur par défaut vide pour éviter un double préfixe '/api' si les contrôleurs
# utilisent déjà '/api' dans leurs mappings. La plateforme de déploiement peut toujours
# surcharger via la variable d'environnement CONTEXT_PATH si nécessaire.
server.servlet.context-path=${CONTEXT_PATH:}

# Configuration de sécurité supplémentaire
server.ssl.enabled=${SSL_ENABLED:false}
server.ssl.key-store=${SSL_KEYSTORE:}
server.ssl.key-store-password=${SSL_KEYSTORE_PASSWORD:}
server.ssl.key-store-type=${SSL_KEYSTORE_TYPE:PKCS12}

